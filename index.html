<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Clasificación 1ª RFEF - Yeclano Virtual</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    .jornadas {
      width: 65%;
      padding: 20px;
      overflow-y: scroll;
      height: 100vh;
      font-size: 20px;
    }
    .clasificacion {
      width: 35%;
      padding: 20px;
      border-left: 2px solid #000;
      overflow: hidden;
      background-color: #f5f5f5;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 2px solid #000;
      padding: 6px;
      text-align: left;
      font-size: 14px;
    }
    th {
      background-color: #ddd;
    }
    .pos-1 {
      color: blue;
      font-weight: bold;
    }
    .pos-2-5 {
      color: green;
      font-weight: bold;
    }
    .pos-16-20 {
      color: red;
      font-weight: bold;
    }
    select {
      margin-top: 5px;
    }
    h2 {
      font-size: 24px;
    }
    .leyenda {
      margin-top: 20px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="jornadas" id="jornadas"></div>
  <div class="clasificacion">
    <h2>Clasificación</h2>
    <table id="tabla-clasificacion"></table>
    <div class="leyenda">
      <p><span class="pos-1">Azul</span>: 1º Clasificado</p>
      <p><span class="pos-2-5">Verde</span>: 2º al 5º</p>
      <p><span class="pos-16-20">Rojo</span>: Puestos de descenso (16º al 20º)</p>
    </div>
  </div>
  <script>
    const equipos = [
      "AD Ceuta FC", "Real Murcia", "Antequera CF", "UD Ibiza", "AD Mérida",
      "Atlético B", "Sevilla At", "RM Castilla", "Alcorcón", "Hércules",
      "Algeciras CF", "Betis Deportivo", "Villarreal B", "Fuenlabrada",
      "Yeclano Deportivo", "Marbella FC", "At. Sanluqueño", "Recreativo",
      "Alcoyano", "CF Intercity"
    ];

    const puntosBase = {
      "AD Ceuta FC": 57,
      "Real Murcia": 53,
      "Antequera CF": 53,
      "UD Ibiza": 52,
      "AD Mérida": 50,
      "Atlético B": 49,
      "Sevilla At": 47,
      "RM Castilla": 46,
      "Alcorcón": 44,
      "Hércules": 44,
      "Algeciras CF": 44,
      "Betis Deportivo": 44,
      "Villarreal B": 40,
      "Fuenlabrada": 40,
      "Yeclano Deportivo": 38,
      "Marbella FC": 37,
      "At. Sanluqueño": 36,
      "Recreativo": 35,
      "Alcoyano": 34,
      "CF Intercity": 29
    };

    let puntos = {};
    let partidosSeleccionados = {};

    function inicializarPuntos() {
      puntos = {...puntosBase};
    }

    function actualizarClasificacion() {
      const tabla = document.getElementById("tabla-clasificacion");
      tabla.innerHTML = "<tr><th>Pos</th><th>Equipo</th><th>Puntos</th></tr>";
      const clasificacion = Object.entries(puntos)
        .sort((a, b) => b[1] - a[1])
        .map((item, index) => {
          let clase = "";
          if (index === 0) clase = "pos-1";
          else if (index >= 1 && index <= 4) clase = "pos-2-5";
          else if (index >= 15) clase = "pos-16-20";
          return `<tr><td class="${clase}">${index + 1}</td><td>${item[0]}</td><td class="${clase}">${item[1]}</td></tr>`;
        }).join("");
      tabla.innerHTML += clasificacion;
    }

    function crearJornadas() {
      const contenedor = document.getElementById("jornadas");
      jornadas.forEach((jornada, indexJ) => {
        const div = document.createElement("div");
        div.innerHTML = `<h2>${jornada.nombre}</h2>`;
        jornada.partidos.forEach((partido, indexP) => {
          const id = `${indexJ}-${indexP}`;
          const select = document.createElement("select");
          select.innerHTML = `
            <option value="">Selecciona resultado</option>
            <option value="${partido[0]}">${partido[0]}</option>
            <option value="empate">Empate</option>
            <option value="${partido[1]}">${partido[1]}</option>
          `;
          select.addEventListener("change", () => {
            if (partidosSeleccionados[id]) {
              const resultadoAnterior = partidosSeleccionados[id];
              if (resultadoAnterior === "empate") {
                puntos[partido[0]] -= 1;
                puntos[partido[1]] -= 1;
              } else {
                puntos[resultadoAnterior] -= 3;
              }
            }
            const seleccion = select.value;
            if (seleccion === "empate") {
              puntos[partido[0]] += 1;
              puntos[partido[1]] += 1;
              partidosSeleccionados[id] = "empate";
            } else if (seleccion !== "") {
              puntos[seleccion] += 3;
              partidosSeleccionados[id] = seleccion;
            } else {
              delete partidosSeleccionados[id];
            }
            actualizarClasificacion();
          });
          div.appendChild(document.createTextNode(`${partido[0]} vs ${partido[1]}`));
          div.appendChild(document.createElement("br"));
          div.appendChild(select);
          div.appendChild(document.createElement("br"));
          div.appendChild(document.createElement("br"));
        });
        contenedor.appendChild(div);
      });
    }

    const jornadas = [
      {
        nombre: "Jornada 34",
        partidos: [
          ["Marbella FC", "Atlético B"], ["At. Sanluqueño", "CF Intercity"],
          ["Alcoyano", "Recreativo"], ["Yeclano Deportivo", "Algeciras CF"],
          ["RM Castilla", "AD Ceuta FC"], ["Sevilla At", "Betis Deportivo"],
          ["AD Mérida", "Antequera CF"], ["Real Murcia", "Villarreal B"],
          ["Hércules", "Alcorcón"], ["UD Ibiza", "Fuenlabrada"]
        ]
      },
      {
        nombre: "Jornada 35",
        partidos: [
          ["Algeciras CF", "Betis Deportivo"], ["AD Ceuta FC", "AD Mérida"],
          ["Alcorcón", "Yeclano Deportivo"], ["At. Sanluqueño", "Alcoyano"],
          ["Antequera CF", "Sevilla At"], ["Atlético B", "Fuenlabrada"],
          ["Recreativo", "UD Ibiza"], ["CF Intercity", "Real Murcia"],
          ["RM Castilla", "Marbella FC"], ["Villarreal B", "Hércules"]
        ]
      },
      {
        nombre: "Jornada 36",
        partidos: [
          ["UD Ibiza", "Alcorcón"], ["Alcoyano", "CF Intercity"],
          ["Yeclano Deportivo", "Villarreal B"], ["Betis Deportivo", "At. Sanluqueño"],
          ["Real Murcia", "Antequera CF"], ["Fuenlabrada", "AD Ceuta FC"],
          ["Sevilla At", "Atlético B"], ["AD Mérida", "RM Castilla"],
          ["Marbella FC", "Recreativo"], ["Hércules", "Algeciras CF"]
        ]
      },
      {
        nombre: "Jornada 37",
        partidos: [
          ["AD Ceuta FC", "Yeclano Deportivo"], ["Alcorcón", "Marbella FC"],
          ["Algeciras CF", "Alcoyano"], ["Antequera CF", "Betis Deportivo"],
          ["Atlético B", "UD Ibiza"], ["CF Intercity", "Hércules"],
          ["RM Castilla", "Fuenlabrada"], ["Recreativo", "AD Mérida"],
          ["At. Sanluqueño", "Real Murcia"], ["Villarreal B", "Sevilla At"]
        ]
      },
      {
        nombre: "Jornada 38",
        partidos: [
          ["Fuenlabrada", "Recreativo"], ["Hércules", "At. Sanluqueño"],
          ["Betis Deportivo", "Villarreal B"], ["AD Mérida", "Atlético B"],
          ["Sevilla At", "Alcorcón"], ["Yeclano Deportivo", "CF Intercity"],
          ["UD Ibiza", "AD Ceuta FC"], ["Marbella FC", "Antequera CF"],
          ["Real Murcia", "Algeciras CF"], ["Alcoyano", "RM Castilla"]
        ]
      }
    ];

    inicializarPuntos();
    crearJornadas();
    actualizarClasificacion();
  </script>
</body>
</html>
